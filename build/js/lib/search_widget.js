!function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var o in r)t.call(r,o)&&(e[o]=r[o]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};define(["jquery"],function(t){return window.SearchWidget=function(r){function n(t,e){var r=this;e.manual_style=!0,null==e.address_params&&(e.address_params={}),e.address_params.region_code="F",null==e.location_params&&(e.location_params={}),e.location_params.region_code="F",n.__super__.constructor.call(this,t,"d1707a90-fd84-012c-d9c3-00e08121877f",e),this.prefix=e.prefix,this.on("address:select",function(t,e){return r.populateFields(t,e.x,e.y)}),this.on("location:select",function(t,e){return r.populateFields(t,e.x,e.y)}),this.addPOIService(),Modernizr.geolocation&&this.addGPSService()}return e(n,r),n.prototype.populateFields=function(e,r,n){return t("#"+this.prefix+"_a").val(e),t("#"+this.prefix+"_x").val(r),t("#"+this.prefix+"_y").val(n)},n.prototype.addPOIService=function(){var e=this;return this.poi_service=this.addService("poi-location",function(e,r){return t.getJSON("http://jp-poi-search.journeyplanner.org.nz/search?callback=?",{q:e},function(t){var n,o;return o=function(){var e,r,o,i;for(o=t.results.slice(0,5),i=[],e=0,r=o.length;r>e;e++)n=o[e],i.push({value:n.a,data:n});return i}(),r(e,o)})}),this.poi_service.on("result:select",function(t,r){return e.populateFields(t,r.x,r.y)})},n.prototype.addGPSService=function(){var t=this;return this.gps_service=this.addService("gps-location",function(t,e){var r;return _.str.include("current location",t.toLowerCase())&&(r=[{value:"Current Location"}]),e(t,r||[])}),this.gps_service.setOption("renderer",function(){return"<i class='icon-screenshot'></i> Current Location"}),this.gps_service.on("result:select",function(){return navigator.geolocation.getCurrentPosition(function(e){return t.populateFields("Current Location",e.coords.longitude,e.coords.latitude)})})},n}(AddressFinder.Widget)})}.call(this);