!function(){var e={}.hasOwnProperty,o=function(o,n){function r(){this.constructor=o}for(var t in n)e.call(n,t)&&(o[t]=n[t]);return r.prototype=n.prototype,o.prototype=new r,o.__super__=n.prototype,o};define(["backbone","jquery","app/models/journey","app/views/composites/sidebar","app/views/composites/journey_form","app/views/items/details_content","app/views/items/error_sidebar","jquery.bbq"],function(e,n,r,t,i,s,u){var p,a;return p=function(e){function p(){return a=p.__super__.constructor.apply(this,arguments)}return o(p,e),p.prototype.routes={"*query_string":"loadJourney"},p.prototype.loadJourney=function(){var e,o,t;return e=n.deparam.querystring(),null!=(o=this.journey)&&o.hideOverlays(),null!=e.example?(this.journey=new r({example:e.example}),this.journey.waypoints.add([{},{}])):(this.journey=new r({mode:e.mode}),(null!=(t=e.waypoints)?t.length:void 0)>=2?this.journey.waypoints.add(_(e.waypoints).compact()):(this.journey.waypoints.add([{},{}]),App.showExamples())),this.renderJourney()},p.prototype.renderJourney=function(){var e=this;return App.resultsRegion.show(new t({model:this.journey,collection:this.journey.steps})),App.journeyFields.show(new i({model:this.journey,collection:this.journey.waypoints})),App.detailContent.show(new s({model:this.journey})),this.journey.isValid()?(n("#global_loading_indicator").show(),this.journey.fetch({success:function(){return n("#global_loading_indicator").hide()},error:function(){return n("#global_loading_indicator").hide(),App.resultsRegion.show(new u({model:e.journey}))}})):void 0},p}(e.Router)})}.call(this);