!function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,r){function a(){this.constructor=e}for(var p in r)t.call(r,p)&&(e[p]=r[p]);return a.prototype=r.prototype,e.prototype=new a,e.__super__=r.prototype,e};window.JPMap=function(t){function a(t){this.updateMaptype=e(this.updateMaptype,this),this.updateOverlay=e(this.updateOverlay,this);var r=this;a.__super__.constructor.call(this,t,this.map_opts),google.maps.event.addListener(this,"maptypeid_changed",function(){return $.cookie("jp_maptype",r.getMapTypeId(),{path:"/",expires:365})}),this.setupLayers()}return r(a,t),a.prototype.map_opts={center:new google.maps.LatLng(-41.105,175.288),zoom:9,mapTypeId:$.cookie("jp_maptype")||google.maps.MapTypeId.ROADMAP,scaleControl:!0,mapTypeControl:!1},a.prototype.setupLayers=function(){return this.pois=new JourneyPlanner.Collections.PointsOfInterest,this.weather_layer=new google.maps.weather.WeatherLayer({temperatureUnits:google.maps.weather.TemperatureUnit.CELCIUS}),this.bike_layer=new google.maps.KmlLayer("http://journeyplanner.org.nz/mobile_combined-0.2.1.kml",{clickable:!1,preserveViewport:!0,suppressInfoWindows:!0}),this.traffic_layer=new google.maps.TrafficLayer},a.prototype.updateOverlay=function(e){var t,r;return null!=(t=this.current_overlay)&&t.setMap(null),this.current_overlay=function(){switch(e){case"paths":return this.bike_layer;case"poi":return this.pois;case"traffic":return this.traffic_layer;case"weather":return this.weather_layer}}.call(this),null!=(r=this.current_overlay)&&r.setMap(this),$.cookie("jp_overlay",e,{path:"/",expires:365})},a.prototype.updateMaptype=function(e){var t;return t=function(){switch(e){case"map":return google.maps.MapTypeId.ROADMAP;case"terrain":return google.maps.MapTypeId.TERRAIN;case"aerial":return google.maps.MapTypeId.HYBRID}}(),this.setMapTypeId(t)},a}(google.maps.Map)}.call(this);