!function(){var t=function(t,o){return function(){return t.apply(o,arguments)}},o={}.hasOwnProperty,n=function(t,n){function e(){this.constructor=t}for(var r in n)o.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};define(["backbone","app/models/point_of_interest"],function(o,e){var r,p;return r=function(o){function r(){return this.updateMap=t(this.updateMap,this),p=r.__super__.constructor.apply(this,arguments)}return n(r,o),r.prototype.model=e,r.prototype.url=function(){return"http://www.journeyplanner.org.nz/api/poi.json?callback=?&bounds="+this.bounds+"&zoom="+this.zoom},r.prototype.setMap=function(t){return null!=t?this.show():this.hide()},r.prototype.show=function(){return this.forEach(function(t){return t.enter()}),this.updateMap(),this.listener=google.maps.event.addListener(App.map,"idle",this.updateMap)},r.prototype.updateMap=function(){var t;return t=App.map,null!=t.getBounds()?(this.bounds=t.getBounds().toUrlValue(),this.zoom=t.getZoom(),this.fetch()):void 0},r.prototype.hide=function(){return this.listener&&google.maps.event.removeListener(this.listener),this.forEach(function(t){return t.exit()})},r}(o.Collection)})}.call(this);