!function(){var e,t,o={}.hasOwnProperty,n=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};JourneyPlanner.Views.WaypointFields=function(t){function o(){return e=o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="div",o.prototype.className="control-group",o.prototype.template=JST["templates/waypoint_fields"],o.prototype.modelEvents={change:"render",update_point:"submitForm"},o.prototype.events={"click a.close":"removeWaypoint"},o.prototype.onRender=function(){var e,t;return t="waypoint_"+this.model.index(),e=$("#"+t+"_a",this.el)[0],new SearchWidget(e,{prefix:t})},o.prototype.templateHelpers=function(){var e=this;return{fieldIndex:function(){return e.model.index()},showClose:function(){return e.model.collection.length>2}}},o.prototype.removeWaypoint=function(){return this.model.collection.remove(this.model),!1},o.prototype.submitForm=function(){return $(this.el).parents("form").submit()},o}(Marionette.ItemView),JourneyPlanner.Views.JourneyForm=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.itemView=JourneyPlanner.Views.WaypointFields,o.prototype.itemViewContainer="#waypoints",o.prototype.template=JST["templates/journey_form"],o.prototype.events={"click a.add-waypoint":"addWaypoint"},o.prototype.collectionEvents={remove:"render"},o.prototype.templateHelpers=function(){var e=this;return{modeActive:function(t){return e.model.get("mode")===t?"active":""},modeChecked:function(t){return e.model.get("mode")===t?"checked":""}}},o.prototype.addWaypoint=function(){return this.collection.add({}),!1},o}(Marionette.CompositeView)}.call(this);