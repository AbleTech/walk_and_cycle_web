!function(){var t={}.hasOwnProperty,e=function(e,r){function n(){this.constructor=e}for(var i in r)t.call(r,i)&&(e[i]=r[i]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};window.SearchWidget=function(t){function r(t,e){var n=this;e.manual_style=!0,null==e.address_params&&(e.address_params={}),e.address_params.region_code="F",r.__super__.constructor.call(this,t,"d1707a90-fd84-012c-d9c3-00e08121877f",e),this.prefix=e.prefix,this.on("address:select",function(t,e){return n.populateFields(t,e.x,e.y)}),this.on("location:select",function(t,e){return n.populateFields(t,e.x,e.y)}),this.addPOIService(),Modernizr.geolocation&&this.addGPSService()}return e(r,t),r.prototype.populateFields=function(t,e,r){return $("#"+this.prefix+"_a").val(t),$("#"+this.prefix+"_x").val(e),$("#"+this.prefix+"_y").val(r)},r.prototype.addPOIService=function(){var t=this;return this.poi_service=this.addService("poi-location",function(t,e){return $.getJSON("http://jp-poi-search.journeyplanner.org.nz/search?callback=?",{q:t},function(r){var n,i;return i=function(){var t,e,i,o;for(i=r.results.slice(0,5),o=[],t=0,e=i.length;e>t;t++)n=i[t],o.push({value:n.a,data:n});return o}(),e(t,i)})}),this.poi_service.on("result:select",function(e,r){return t.populateFields(e,r.x,r.y)})},r.prototype.addGPSService=function(){var t=this;return this.gps_service=this.addService("gps-location",function(t,e){var r;return _.str.include("current location",t.toLowerCase())&&(r=[{value:"Current Location"}]),e(t,r||[])}),this.gps_service.setOption("renderer",function(){return"<i class='icon-screenshot'></i> Current Location"}),this.gps_service.on("result:select",function(){return navigator.geolocation.getCurrentPosition(function(e){return t.populateFields("Current Location",e.coords.longitude,e.coords.latitude)})})},r}(AddressFinder.Widget)}.call(this);