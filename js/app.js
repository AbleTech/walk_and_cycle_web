!function(){define(["jquery","marionette","lib/jp_map","app/routers/default","app/collections/example_journeys","app/views/composites/example_list"],function(e,t,i,n,a,o){return window.App=new t.Application,App.addRegions({resultsRegion:e("#results"),examplesRegion:e("#examples"),journeyFields:e("#journey_form fieldset"),detailContent:e("#detail_content")}),App.addInitializer(function(){return e(window).resize(function(){var t;return t=e(window).height()-150,e(".left_sidebar").height(t),e(".right_body").css("height",t)}),e(window).trigger("resize")}),App.addInitializer(function(){return this.map=new i(document.getElementById("mapdiv")),null!=e.cookie("jp_overlay")?this.map.updateOverlay(e.cookie("jp_overlay")):void 0}),App.addInitializer(function(){var e=this;return this.all_examples=new a,this.all_examples.fetch({success:function(){return e.example_view=new o,e.examplesRegion.show(e.example_view)}})}),App.addInitializer(function(){var t=this;return this.showResults=function(){var e,i,n;return null!=(e=t.example_view)&&e.collection.hideOverlays(),null!=(i=t.router)?null!=(n=i.journey)?n.showOverlays(t.map):void 0:void 0},this.showExamples=function(){var e,i,n;return null!=(e=t.example_view)&&e.collection.showOverlays(t.map),null!=(i=t.router)?null!=(n=i.journey)?n.hideOverlays():void 0:void 0},e("a[href='#examples']").on("show",this.showExamples),e("a[href='#results']").on("show",this.showResults)}),App.addInitializer(function(){var t=this;return e("#overlay-options li a").click(function(i){return t.map.updateOverlay(e(i.target).data("overlay")),e("#overlay-options").dropdown("toggle"),!1}),e("#maptype-options li a").click(function(i){return t.map.updateMaptype(e(i.target).data("maptype")),e("#maptype-options").dropdown("toggle"),!1})}),App.addInitializer(function(){var t=this;return e("#journey_form").submit(function(){var i;return i=unescape(e("#journey_form").serialize()),t.router.navigate("?"+i,{trigger:!0,replace:!0}),!1})}),App.addInitializer(function(){var t=this;return e("#detail_toggle").click(function(){return e(".right_body").hasClass("expanded")?(e(".right_body").removeClass("expanded"),e("#detail_toggle").html("<i class='icon-double-angle-up'></i> expand")):(e(".right_body").addClass("expanded"),e("#detail_toggle").html("<i class='icon-double-angle-down'></i> hide")),setTimeout(function(){return google.maps.event.trigger(t.map,"resize")},500),!1})}),App.addInitializer(function(){return this.router=new n,this.on("initialize:after",function(){return Backbone.history?Backbone.history.start({pushState:!0,root:document.location.pathname,hashChange:!1}):void 0})})})}.call(this);