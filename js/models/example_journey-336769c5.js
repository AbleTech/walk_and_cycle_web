!function(){var e,t,o=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,i=function(e,t){function o(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};JourneyPlanner.Models.ExampleJourney=function(t){function n(){return this.unhighlight=o(this.unhighlight,this),this.highlight=o(this.highlight,this),this.showExample=o(this.showExample,this),this.halfwayPoint=o(this.halfwayPoint,this),e=n.__super__.constructor.apply(this,arguments)}return i(n,t),n.prototype.initialize=function(){return this.waypoints=new JourneyPlanner.Collections.Waypoints,this.waypoints.reset(this.get("waypoints"))},n.prototype.visible=function(){return this.get("mode")===this.collection.mode},n.prototype.polyline=function(){return null!=this._polyline?this._polyline:(this._polyline=new google.maps.Polyline({path:google.maps.geometry.encoding.decodePath(this.get("encoded_polyline").polyline),strokeColor:"#2564a5",strokeWeight:4,strokeOpacity:.7,title:this.get("name")}),google.maps.event.addListener(this._polyline,"mouseover",this.highlight),google.maps.event.addListener(this._polyline,"mouseout",this.unhighlight),google.maps.event.addListener(this._polyline,"click",this.showExample),this._polyline)},n.prototype.exampleMarker=function(){return null!=this._example_marker?this._example_marker:(this._example_marker=new google.maps.Marker({position:this.halfwayPoint(),title:this.get("name")}),google.maps.event.addListener(this._example_marker,"mouseover",this.highlight),google.maps.event.addListener(this._example_marker,"mouseout",this.unhighlight),google.maps.event.addListener(this._example_marker,"click",this.showExample),this._example_marker)},n.prototype.queryString=function(){var e;return e="?mode="+this.get("mode"),this.waypoints.each(function(t){return e+="&"+t.queryStr()}),e},n.prototype.halfwayPoint=function(){var e;return e=.5*this.get("total_distance"),this.pointAlongPath(e)},n.prototype.showExample=function(){return JourneyPlanner.App.router.navigate(this.queryString(),{trigger:!0,replace:!0})},n.prototype.highlight=function(){return this.polyline().setOptions({strokeColor:"#fa780f"}),this.trigger("highlight")},n.prototype.unhighlight=function(){return this.polyline().setOptions({strokeColor:"#2564a5"}),this.trigger("unhighlight")},n}(JourneyPlanner.Models.Journey),JourneyPlanner.Collections.ExampleJourneys=function(e){function o(){return t=o.__super__.constructor.apply(this,arguments)}return i(o,e),o.prototype.model=JourneyPlanner.Models.ExampleJourney,o.prototype.mode="walking",o.prototype.updateMode=function(e){return this.mode=e,this.resetOverlays(),this.trigger("update_mode")},o.prototype.resetOverlays=function(e){return null==e&&(e=JourneyPlanner.App.map),this.forEach(function(t){return t.visible()?(t.polyline().setMap(e),t.exampleMarker().setMap(e)):(t.polyline().setMap(null),t.exampleMarker().setMap(null))})},o.prototype.showOverlays=function(e){return this.forEach(function(t){return t.visible()?(t.polyline().setMap(e),t.exampleMarker().setMap(e)):void 0})},o.prototype.hideOverlays=function(){return this.showOverlays(null)},o}(Backbone.Collection)}.call(this);