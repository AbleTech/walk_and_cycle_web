!function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};JourneyPlanner.Models.PointOfInterest=function(e){function o(){return this.exit=n(this.exit,this),this.enter=n(this.enter,this),t=o.__super__.constructor.apply(this,arguments)}return r(o,e),o.prototype.sprite_coords={airport:[2,2],bike_shop:[26,2],bus_stop:[50,2],church:[74,2],council_building:[98,2],cycle_rake:[2,26],drinking_fountain:[26,26],hospital:[50,26],information:[74,26],landmark:[98,26],library:[2,50],museum:[26,50],park:[50,50],playground:[74,50],pool:[98,50],post_office:[2,74],rec_centre:[26,74],reserve:[50,74],school:[74,74],seat:[98,74],shopping_mall:[2,98],skatepark:[26,98],steps:[50,98],streetlight:[74,98],theatre:[98,98],toilet:[122,2],trafficlight:[122,26],zebracrossing:[122,50]},o.prototype.initialize=function(){return this.on("add",this.enter),this.on("remove",this.exit)},o.prototype.enter=function(){return this.marker().setMap(JourneyPlanner.App.map)},o.prototype.exit=function(){return this.marker().setMap(null)},o.prototype.marker=function(){return this._marker||(this._marker=new google.maps.Marker({position:this.latlng(),title:this.get("title"),icon:this.icon()}))},o.prototype.icon=function(){return{url:"img/poi_markers.png",anchor:new google.maps.Point(10,10),origin:function(t,e,n){n.prototype=t.prototype;var o=new n,r=t.apply(o,e);return Object(r)===r?r:o}(google.maps.Point,this.sprite_coords[this.get("poi_type")],function(){}),size:new google.maps.Size(20,20)}},o.prototype.latlng=function(){return this._latlng||(this._latlng=new google.maps.LatLng(this.get("y"),this.get("x")))},o.prototype.parse=function(t){return t.points_of_interest},o}(Backbone.Model),JourneyPlanner.Collections.PointsOfInterest=function(t){function o(){return this.updateMap=n(this.updateMap,this),e=o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.model=JourneyPlanner.Models.PointOfInterest,o.prototype.url=function(){return"http://staging.journeyplanner.org.nz/api/poi.json?callback=?&bounds="+this.bounds+"&zoom="+this.zoom},o.prototype.setMap=function(t){return null!=t?this.show():this.hide()},o.prototype.show=function(){return this.forEach(function(t){return t.enter()}),this.updateMap(),this.listener=google.maps.event.addListener(JourneyPlanner.App.map,"idle",this.updateMap)},o.prototype.updateMap=function(){var t;return t=JourneyPlanner.App.map,null!=t.getBounds()?(this.bounds=t.getBounds().toUrlValue(),this.zoom=t.getZoom(),this.fetch()):void 0},o.prototype.hide=function(){return this.listener&&google.maps.event.removeListener(this.listener),this.forEach(function(t){return t.exit()})},o}(Backbone.Collection)}.call(this);